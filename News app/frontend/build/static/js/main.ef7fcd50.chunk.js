(this.webpackJsonpnewsapp=this.webpackJsonpnewsapp||[]).push([[0],[,,,,,,,,,,,,,,function(e,t,a){},,,,,function(e,t,a){e.exports={container:"Select_container__3fMTk"}},,,,function(e,t,a){},,,,function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAABmJLR0QA/wD/AP+gvaeTAAABpElEQVRoge3XsWvUYBzG8Y9yKIJVEXQoDjd2EVzsJDgIgpubbnVydtM/wdWxq5MgiCCO4mBBKAguLuLiIqIUWpCj2FodLm/PxrSXq7nkZ32/8EzJvXm+5PJ7EzK16ONlkX7HXfbNNazgZ5FVXO+00YQcwl38MJJI2cJ9HO6sXU1O4Ik/Bcp5jtMddRzLBXwwXiLlIy6W1tjt3NZYwGCPIrtlUPw2cQffK86bOkfxYB8C5TzEsWLNS/jUpsg5vG5AIuWN0Yg+gxdtiFzG5wYlUr7ianGNnuGE25qGQBqtm1OQSNnEveJacKNpiRk8nqJAOc9wqmmJObxrUSLlPc43JXET3zqQSBng1t8IpIetK4FyFnFkUomzdo6/KFnCbF2Jqg0pUr7gyjiJ26pfEaJlw3AbSCN6m+N4FKDgpHmKk7+LLBcH1gKUq5vUdZnRB84G3mK+fKsCM2/4frZOxX/M0PJfYEf38J+cdcki0cgi0cgi0eg1vF7VvrQXje1ZB+aOZJFoZJFoZJFoZJFoZJFoZJFoZJFoHGiRpdZbTM6rrgtk/ht+AZJi8ybhOtGyAAAAAElFTkSuQmCC"},,,function(e,t,a){e.exports=a(60)},,,,,function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,function(e,t,a){"use strict";a.r(t);var n,r=a(0),c=a.n(r),l=a(11),i=a.n(l),s=(a(35),a(5)),o=a(4),u=Object(r.createContext)({isLoggedIn:!1,isAdmin:!1,userId:null,token:null,login:function(){},logout:function(){}}),m=a(2),p=a(1),d=a.n(p),E=a(3),f=(a(37),a(38),function(e){return c.a.createElement("div",{className:"card ".concat(e.className),style:e.style},e.children)}),v=(a(39),function(e){return e.href?c.a.createElement("a",{className:"button button--".concat(e.size||"default"," ").concat(e.inverse&&"button--inverse"," ").concat(e.danger&&"button--danger"),href:e.href},e.children):e.to?c.a.createElement(o.b,{to:e.to,exact:e.exact,className:"button button--".concat(e.size||"default"," ").concat(e.inverse&&"button--inverse"," ").concat(e.danger&&"button--danger")},e.children):c.a.createElement("button",{className:"button button--".concat(e.size||"default"," ").concat(e.inverse&&"button--inverse"," ").concat(e.danger&&"button--danger"),type:e.type,onClick:e.onClick,disabled:e.disabled},e.children)}),b=a(61),h=(a(45),function(e){return i.a.createPortal(c.a.createElement("div",{className:"backdrop",onClick:e.onClick}),document.getElementById("backdrop-hook"))}),g=(a(46),function(e){var t=c.a.createElement("div",{className:"modal ".concat(e.className),style:e.style},c.a.createElement("header",{className:"modal-header ".concat(e.headerClass)},c.a.createElement("h2",null,e.header)),c.a.createElement("form",{onSubmit:e.onSubmit?e.onSubmit:function(e){return e.preventDefault()}},c.a.createElement("div",{className:"modal-content ".concat(e.contentClass)},e.children),c.a.createElement("footer",{className:"modal-footer ".concat(e.footerClass)},e.footer)));return l.createPortal(t,document.getElementById("modal-hook"))}),O=function(e){return c.a.createElement(c.a.Fragment,null,e.show&&c.a.createElement(h,{onClick:e.onCancel}),c.a.createElement(b.a,{in:e.show,timeout:200,mountOnEnter:!0,unmountOnExit:!0,classNames:"modal"},c.a.createElement(g,e)))},j=(a(23),function(){var e=Object(r.useState)(!1),t=Object(m.a)(e,2),a=t[0],n=t[1],c=Object(r.useState)(),l=Object(m.a)(c,2),i=l[0],s=l[1],o=Object(r.useRef)([]),u=Object(r.useCallback)(function(){var e=Object(E.a)(d.a.mark((function e(t){var a,r,c,l,i,u,m=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=m.length>1&&void 0!==m[1]?m[1]:"GET",r=m.length>2&&void 0!==m[2]?m[2]:null,c=m.length>3&&void 0!==m[3]?m[3]:{},n(!0),l=new AbortController,o.current.push(l),e.prev=6,e.next=9,fetch(t,{method:a,body:r,headers:c,signal:l.signal});case 9:return i=e.sent,e.next=12,i.json();case 12:if(u=e.sent,o.current=o.current.filter((function(e){return e!==l})),i.ok){e.next=16;break}throw new Error(u.message);case 16:return n(!1),e.abrupt("return",u);case 20:throw e.prev=20,e.t0=e.catch(6),s(e.t0.message),n(!1),e.t0;case 25:case"end":return e.stop()}}),e,null,[[6,20]])})));return function(t){return e.apply(this,arguments)}}(),[]);return Object(r.useEffect)((function(){return function(){o.current.forEach((function(e){return e.abort()}))}}),[]),{isLoading:a,error:i,sendRequest:u,clearError:function(){s(null)}}}),k=function(e){return c.a.createElement(O,{onCancel:e.onClear,header:"An Error Occurred!",show:!!e.error,footer:c.a.createElement(v,{onClick:e.onClear},"Okay")},c.a.createElement("p",null,e.error))},w=(a(47),function(e){return c.a.createElement("div",{className:"".concat(e.asOverlay&&"loading-spinner__overlay")},c.a.createElement("div",{className:"lds-dual-ring"}))}),x=(a(48),function(e){return c.a.createElement("div",{className:"avatar ".concat(e.className),style:e.style},c.a.createElement("img",{src:e.image,alt:e.alt,style:{width:e.width,height:e.width}}))}),I=(a(49),function(e){var t=Object(r.useRef)(),a=e.center,n=e.zoom;return Object(r.useEffect)((function(){new window.ol.Map({target:t.current.id,layers:[new window.ol.layer.Tile({source:new window.ol.source.OSM})],view:new window.ol.View({center:window.ol.proj.fromLonLat([a.lng,a.lat]),zoom:n})})}),[a,n]),c.a.createElement("div",{ref:t,className:"map ".concat(e.className),style:e.style,id:"map"})}),y=function(e){var t=j(),a=t.isLoading,n=t.error,l=t.sendRequest,i=t.clearError,p=Object(r.useContext)(u),b=Object(r.useState)(!1),h=Object(m.a)(b,2),g=h[0],y=h[1],C=Object(r.useState)(!1),N=Object(m.a)(C,2),T=N[0],S=N[1],A=Object(s.g)(),V=function(){return y(!1)},L=function(){return S(!1)},P=function(){var t=Object(E.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return L(),t.prev=1,t.next=4,l("".concat("https://newsappprod.herokuapp.com/api","/posts/").concat(e.id),"DELETE",null,{Authorization:"Bearer "+p.token});case 4:t.next=8;break;case 6:t.prev=6,t.t0=t.catch(1);case 8:return t.prev=8,A.push("/"),A.go(0),t.finish(8);case 12:case"end":return t.stop()}}),t,null,[[1,6,8,12]])})));return function(){return t.apply(this,arguments)}}();return c.a.createElement(c.a.Fragment,null,c.a.createElement(k,{error:n,onClear:i}),c.a.createElement(O,{show:g,onCancel:V,header:e.address,contentClass:"place-item-modal-content",footerClass:"place-item-modal-actions",footer:c.a.createElement(v,{onClick:V},"CLOSE")},c.a.createElement("div",{className:"map-container"},c.a.createElement(I,{center:e.coordinate,zoom:16}))),c.a.createElement(O,{show:T,onCancel:L,header:"Delete your place?",contentClass:"place-item-modal-content",footerClass:"place-item-modal-actions",footer:c.a.createElement(c.a.Fragment,null,c.a.createElement(v,{inverse:!0,onClick:L},"Cancel"),c.a.createElement(v,{danger:!0,onClick:P},"DELETE"))},c.a.createElement("p",null,"Post can't be restored")),c.a.createElement("li",{className:"place-item"},c.a.createElement(f,{className:"place-item-content"},a&&c.a.createElement(w,{asOverlay:!0}),c.a.createElement("div",{className:"place-item-info"},c.a.createElement("div",{className:"author-data"},c.a.createElement(o.b,{to:"/users/".concat(e.creatorId)},c.a.createElement("div",{className:"user-item-image"},c.a.createElement(x,{image:e.creatorImage,alt:""})),c.a.createElement("div",{className:"user-item-info"},c.a.createElement("h3",null,e.creatorName),c.a.createElement("h3",null,e.category)))),c.a.createElement("h2",null,e.title),c.a.createElement("h3",null,e.address),c.a.createElement("p",null,e.description)),c.a.createElement("div",{className:"place-item-image"},c.a.createElement("img",{src:e.image,alt:e.title})),c.a.createElement("div",{className:"place-item-actions"},c.a.createElement(v,{inverse:!0,onClick:function(){return y(!0)}},"VIEW ON MAP"),c.a.createElement(v,{inverse:!0,onClick:function(){var t="https://wa.me?text=".concat(window.location.href+"/posts/"+e.id);window.open(t,"_blank")}},"SHARE"),(p.userId===e.creatorId||p.isAdmin)&&c.a.createElement(v,{danger:!0,onClick:function(){return S(!0)}},"DELETE"),p.userId===e.creatorId&&c.a.createElement(v,{to:"/posts/".concat(e.id)},"EDIT")))))},C=function(e){return c.a.createElement("ul",{className:"place-list"},e.items.map((function(e){return c.a.createElement(y,{key:e.id,id:e.id,image:e.image,title:e.title,description:e.description,address:e.address,category:e.category,creatorId:e.creator.id,creatorName:e.creator.name,creatorImage:e.creator.image,coordinate:e.location})})))},N=function(e){var t=j(),a=t.isLoading,n=t.error,l=t.sendRequest,i=t.clearError,o=Object(r.useContext)(u),p=Object(r.useState)(!1),b=Object(m.a)(p,2),h=b[0],g=b[1],x=Object(s.g)(),I=function(){return g(!1)},y=function(){var t=Object(E.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return I(),t.prev=1,t.next=4,l("".concat("https://newsappprod.herokuapp.com/api","/admin/post/").concat(e.id),"DELETE",null,{Authorization:"Bearer "+o.token});case 4:t.next=8;break;case 6:t.prev=6,t.t0=t.catch(1);case 8:return t.prev=8,x.push("/"),x.go(0),t.finish(8);case 12:case"end":return t.stop()}}),t,null,[[1,6,8,12]])})));return function(){return t.apply(this,arguments)}}();return c.a.createElement(c.a.Fragment,null,c.a.createElement(k,{error:n,onClear:i}),c.a.createElement(O,{show:h,onCancel:I,header:"Delete your post?",contentClass:"place-item-modal-content",footerClass:"place-item-modal-actions",footer:c.a.createElement(c.a.Fragment,null,c.a.createElement(v,{inverse:!0,onClick:I},"Cancel"),c.a.createElement(v,{danger:!0,onClick:y},"DELETE"))},c.a.createElement("p",null,"Post can't be restored")),c.a.createElement("div",{className:"admin-post"},c.a.createElement(f,{className:"place-item-content"},a&&c.a.createElement(w,{asOverlay:!0}),c.a.createElement("div",{className:"place-item-info"},c.a.createElement("h2",null,e.title),c.a.createElement("p",null,e.description)),c.a.createElement("div",{className:"place-item-image"},c.a.createElement("img",{src:e.image,alt:e.title})),c.a.createElement("div",{className:"place-item-actions"},o.isAdmin&&c.a.createElement(v,{to:"/posts/".concat(e.id)},"EDIT"),o.isAdmin&&c.a.createElement(v,{danger:!0,onClick:function(){return g(!0)}},"DELETE")))))},T=a(19),S=a.n(T);var A=function(e){return c.a.createElement("div",{className:S.a.container},c.a.createElement("select",{name:"type",id:"type",onChange:function(t){return e.onChange(t.target.value)}},"place",e.items.map((function(e){return c.a.createElement("option",{className:S.a.option,key:e.id,value:e.value},e.label)}))))},V=function(e){var t=Object(r.useContext)(u),a=Object(r.useState)("none"),n=Object(m.a)(a,2),l=n[0],i=n[1],s=Object(r.useState)(""),o=Object(m.a)(s,2),p=o[0],f=o[1],v=j(),b=v.isLoading,h=(v.error,v.sendRequest),g=(v.clearError,Object(r.useState)([])),O=Object(m.a)(g,2),k=O[0],x=O[1],I=Object(r.useState)(),y=Object(m.a)(I,2),T=y[0],S=y[1],V=Object(r.useState)([]),L=Object(m.a)(V,2),P=L[0],D=L[1];return Object(r.useEffect)((function(){(function(){var e=Object(E.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h("".concat("https://newsappprod.herokuapp.com/api","/admin/post"));case 3:t=e.sent,S(t.posts[0]),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[h]),Object(r.useEffect)((function(){(function(){var e=Object(E.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h("".concat("https://newsappprod.herokuapp.com/api","/posts"));case 3:t=e.sent,x(t.posts),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[h]),Object(r.useEffect)((function(){(function(){var e=Object(E.a)(d.a.mark((function e(){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.token){e.next=11;break}return e.prev=1,e.next=4,h("https://api.exchangerate.host/latest");case 4:a=e.sent,D(Object.entries(a.rates)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}})()()}),[h,t.token]),Object(r.useEffect)((function(){(function(){var e=Object(E.a)(d.a.mark((function e(){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.token){e.next=11;break}return e.prev=1,e.next=4,h("https://api.exchangerate.host/latest");case 4:a=e.sent,D(Object.entries(a.rates)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}})()()}),[h,t.token]),c.a.createElement(c.a.Fragment,null,b&&c.a.createElement("div",{className:"center"},c.a.createElement(w,null)),!b&&T&&c.a.createElement(N,{id:null===T||void 0===T?void 0:T.id,title:null===T||void 0===T?void 0:T.title,description:null===T||void 0===T?void 0:T.description,image:null===T||void 0===T?void 0:T.image}),!b&&k&&c.a.createElement("div",{className:"filters"},c.a.createElement(A,{items:[{id:1,label:"Select Category",value:"none"},{id:2,label:"Sport",value:"sport"},{id:3,label:"Politics",value:"politics"},{id:4,label:"Economics",value:"economics"},{id:5,label:"Culture",value:"culture"}],onChange:function(e){i(e)}}),c.a.createElement("input",{id:"title",type:"text",onInput:function(e){console.log("change ",e.target.value),f(e.target.value)}})),!b&&k&&c.a.createElement(C,{items:k.filter((function(e){return"none"!==l&&p?e.category===l&&e.title.includes(p):"none"===l||p?"none"===l&&p?e.title.includes(p):e:e.category===l}))}),!b&&P&&c.a.createElement("div",{className:"apiNews"},c.a.createElement("ul",{className:"app-news-list"},P.map((function(e){return c.a.createElement("li",{key:e},c.a.createElement("span",null,e[0]),c.a.createElement("span",null,e[1]))})))))},L=(a(50),function(e){return c.a.createElement("li",{className:"user-item"},c.a.createElement(f,{className:"user-item-content"},c.a.createElement(o.b,{to:"/".concat(e.id,"/posts")},c.a.createElement("div",{className:"user-item-image"},c.a.createElement(x,{image:e.image,alt:e.name})),c.a.createElement("div",{className:"user-item-info"},c.a.createElement("div",null,c.a.createElement("h2",null,e.name),c.a.createElement("h3",null,e.email)),c.a.createElement("div",null,c.a.createElement("h3",null,e.postCount,1===e.postCount?" Post":" Posts"))))))}),P=(a(51),function(){var e=Object(r.useContext)(u),t=j(),a=t.isLoading,n=t.error,l=t.sendRequest,i=t.clearError,o=Object(r.useState)(),p=Object(m.a)(o,2),f=p[0],b=p[1],h=Object(r.useState)(!1),g=Object(m.a)(h,2),x=g[0],I=g[1],y=Object(s.g)(),C=Object(s.h)().userId;Object(r.useEffect)((function(){var t=e.userId;C!==e.userId&&(t=C),function(){var a=Object(E.a)(d.a.mark((function a(){var n;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,l("".concat("https://newsappprod.herokuapp.com/api","/users/").concat(t),"GET",null,{Authorization:"Bearer "+e.token});case 3:n=a.sent,b(n.user),a.next=9;break;case 7:a.prev=7,a.t0=a.catch(0);case 9:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(){return a.apply(this,arguments)}}()()}),[l]);var N=function(){return I(!1)},T=function(){var t=Object(E.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return N(),t.prev=1,t.next=4,l("".concat("https://newsappprod.herokuapp.com/api","/users/").concat(e.userId),"DELETE",null,{Authorization:"Bearer "+e.token});case 4:e.logout(),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(1);case 9:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(){return t.apply(this,arguments)}}();return c.a.createElement(c.a.Fragment,null,c.a.createElement(k,{error:n,onClear:i}),c.a.createElement(O,{show:x,onCancel:N,header:"Delete your profile?",contentClass:"place-item-modal-content",footerClass:"place-item-modal-actions",footer:c.a.createElement(c.a.Fragment,null,c.a.createElement(v,{inverse:!0,onClick:N},"Cancel"),c.a.createElement(v,{danger:!0,onClick:T},"DELETE"))},c.a.createElement("p",null,"Profile can't be restored")),a&&c.a.createElement("div",{className:"center"},c.a.createElement(w,null)),!a&&f&&c.a.createElement("div",{className:"user-profile"},c.a.createElement(L,{key:f.id,id:f.id,image:f.image,name:f.name,email:f.email,postCount:f.posts.length}),c.a.createElement("div",{className:"user-profile-controls"},e.isLoggedIn&&e.userId===C&&c.a.createElement(v,{danger:!0,onClick:function(){return I(!0)}},"DELETE PROFILE"),e.isLoggedIn&&c.a.createElement(v,{inverse:!0,onClick:function(){var t=e.userId;C!==e.userId&&(t=C),y.push("/".concat(t,"/posts"))}},"SHOW POSTS"),e.isLoggedIn&&c.a.createElement(v,{to:"/update/".concat(f.id)},"EDIT PROFILE"))))}),D=function(e){var t=j(),a=t.isLoading,n=t.error,l=t.sendRequest,i=t.clearError,o=Object(r.useState)(),u=Object(m.a)(o,2),p=u[0],f=u[1],v=Object(s.h)().userId,b=Object(s.g)();Object(r.useEffect)((function(){(function(){var e=Object(E.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l("".concat("https://newsappprod.herokuapp.com/api","/posts/user/").concat(v));case 3:t=e.sent,f(t.posts),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),b.push("/");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[l,v]);return c.a.createElement(c.a.Fragment,null,c.a.createElement(k,{error:n,onClear:i}),a&&c.a.createElement("div",{className:"center"},c.a.createElement(w,null)),!a&&p&&c.a.createElement(C,{items:p,onDelete:function(e){f((function(t){return t.filter((function(t){return t.id!==e}))}))}}))},R=a(8),F=a(26),J=function(e){return{type:"MINLENGTH",val:e}},U=function(e,t){var a,n=!0,r=Object(F.a)(t);try{for(r.s();!(a=r.n()).done;){var c=a.value;"REQUIRE"===c.type&&(n=n&&e.trim().length>0),"MINLENGTH"===c.type&&(n=n&&e.trim().length>=c.val),"MAXLENGTH"===c.type&&(n=n&&e.trim().length<=c.val),"MIN"===c.type&&(n=n&&+e>=c.val),"MAX"===c.type&&(n=n&&+e<=c.val),"EMAIL"===c.type&&(n=n&&/^\S+@\S+\.\S+$/.test(e))}}catch(l){r.e(l)}finally{r.f()}return n},B=(a(52),function(e,t){switch(t.type){case"CHANGE":return Object(R.a)(Object(R.a)({},e),{},{value:t.val,isValid:U(t.val,t.validators)});case"TOUCH":return Object(R.a)(Object(R.a)({},e),{},{isTouched:!0});default:return e}}),G=function(e){var t=Object(r.useReducer)(B,{value:e.initialValue||"",isValid:e.initialIsValid||"",isTouched:!1}),a=Object(m.a)(t,2),n=a[0],l=a[1],i=e.id,s=e.onInput,o=n.value,u=n.isValid;Object(r.useEffect)((function(){e.onInput(i,o,u)}),[i,o,u,s]);var p=function(t){l({type:"CHANGE",val:t.target.value,validators:e.validators})},d=function(){l({type:"TOUCH"})},E="input"===e.element?c.a.createElement("input",{id:e.id,type:e.type,placeholder:e.placeholder,onChange:p,onBlur:d,value:n.value}):c.a.createElement("textarea",{id:e.id,rows:e.rows||3,onBlur:d,onChange:p,value:n.value});return c.a.createElement("div",{className:"form-control ".concat(!n.isValid&&n.isTouched&&"form-control-invalid")},c.a.createElement("label",{htmlFor:e.id},e.label),E,!n.isValid&&n.isTouched&&c.a.createElement("p",null,e.errorText))},z=a(15),q=function(e,t){switch(t.type){case"INPUT_CHANGE":var a=!0;for(var n in e.inputs)e.inputs[n]&&(a=n===t.inputId?a&&t.isValid:a&&e.inputs[n].isValid);return Object(R.a)(Object(R.a)({},e),{},{inputs:Object(R.a)(Object(R.a)({},e.inputs),{},Object(z.a)({},t.inputId,{value:t.value,isValid:t.isValid})),isValid:a});case"SET_DATA":return{inputs:t.inputs,isValid:t.formIsValid};default:return e}},M=function(e,t){var a=Object(r.useReducer)(q,{inputs:e,isValid:t}),n=Object(m.a)(a,2),c=n[0],l=n[1];return[c,Object(r.useCallback)((function(e,t,a){l({type:"INPUT_CHANGE",value:t,isValid:a,inputId:e})}),[]),Object(r.useCallback)((function(e,t){l({type:"SET_DATA",inputs:e,formIsValid:t})}),[])]},H=(a(14),function(){var e=Object(r.useState)("none"),t=Object(m.a)(e,2),a=t[0],n=t[1],l=j(),i=l.isLoading,o=l.error,p=l.sendRequest,f=l.clearError,b=Object(r.useContext)(u),h=M({title:{value:"",isValid:!1},description:{value:"",isValid:!1},address:{value:"",isValid:!1},image:{value:"",isValid:!1}},!1),g=Object(m.a)(h,2),O=g[0],x=g[1],I=Object(s.g)(),y=function(){var e=Object(E.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,p("".concat("https://newsappprod.herokuapp.com/api","/posts"),"POST",JSON.stringify({title:O.inputs.title.value,description:O.inputs.description.value,address:O.inputs.address.value,category:a,image:O.inputs.image.value}),{"Content-Type":"application/json",Authorization:"Bearer "+b.token});case 4:I.push("/"),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(1);case 9:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}();return c.a.createElement(c.a.Fragment,null,c.a.createElement(k,{error:o,onClear:f}),c.a.createElement("form",{className:"place-form",onSubmit:y},i&&c.a.createElement(w,{asOverlay:!0}),c.a.createElement(G,{id:"title",element:"input",type:"text",label:"Title",validators:[{type:"REQUIRE"}],onInput:x,errorText:"Please enter a valid title"}),c.a.createElement(G,{id:"description",element:"textarea",label:"Description",validators:[J(5)],onInput:x,errorText:"Please enter a valid description."}),c.a.createElement(A,{items:[{id:1,label:"Select Category",value:"none"},{id:2,label:"Sport",value:"sport"},{id:3,label:"Politics",value:"politics"},{id:4,label:"Economics",value:"economics"},{id:5,label:"Culture",value:"culture"}],onChange:function(e){n(e)}}),c.a.createElement(G,{id:"address",element:"input",label:"Address",validators:[{type:"REQUIRE"}],onInput:x,errorText:"Please enter a valid address"}),c.a.createElement(G,{id:"image",element:"input",label:"Image",validators:[],onInput:x,errorText:"Please enter a url"}),c.a.createElement(v,{type:"submit",disabled:!O.isValid},"ADD PLACE")))}),Q=function(){var e=j(),t=e.isLoading,a=e.error,n=e.sendRequest,l=e.clearError,i=Object(r.useState)(),o=Object(m.a)(i,2),p=o[0],b=o[1],h=Object(s.h)().postId,g=Object(r.useContext)(u),O=Object(s.g)(),x=M({title:{value:"",isValid:!0},description:{value:"",isValid:!0},image:{value:"",isValid:!1}},!0),I=Object(m.a)(x,3),y=I[0],C=I[1],N=I[2],T=function(){var e=Object(E.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,n("".concat("https://newsappprod.herokuapp.com/api","/posts/").concat(h),"PATCH",JSON.stringify({title:y.inputs.title.value,description:y.inputs.description.value,image:y.inputs.image.value}),{"Content-Type":"application/json",Authorization:"Bearer "+g.token});case 4:O.push("/"+g.userId+"/posts"),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(1);case 9:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){(function(){var e=Object(E.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n("".concat("https://newsappprod.herokuapp.com/api","/posts/post/").concat(h));case 3:t=e.sent,b(t.post),N({title:{value:t.post.title,isValid:!0},description:{value:t.post.description,isValid:!0}},!0),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[N,h,n]),t?c.a.createElement("div",{className:"center"},c.a.createElement(w,null)):p||a?c.a.createElement(c.a.Fragment,null,c.a.createElement(k,{error:a,onClear:l}),!t&&p&&c.a.createElement("form",{className:"place-form",onSubmit:T},c.a.createElement(G,{id:"title",element:"input",type:"text",label:"Title",validators:[{type:"REQUIRE"}],onInput:C,initialValue:p.title,initialIsValid:!0,errorText:"Please enter a valid title"}),c.a.createElement(G,{id:"description",element:"textarea",label:"Description",validators:[J(5)],onInput:C,initialValue:p.description,initialIsValid:!0,errorText:"Please enter a valid description."}),c.a.createElement(G,{id:"image",element:"input",label:"Image",validators:[],onInput:C,initialValue:p.image,errorText:"Please enter a url"}),c.a.createElement(v,{type:"submit",disabled:!y.isValid},"UPDATE PLACE"))):c.a.createElement("div",{className:"center"},c.a.createElement(f,null,c.a.createElement("h2",null,"Couldn't fetch post")))},X=function(){var e=j(),t=e.isLoading,a=e.error,n=e.sendRequest,l=e.clearError,i=Object(r.useState)(),o=Object(m.a)(i,2),p=o[0],b=o[1],h=Object(s.h)().userId,g=Object(r.useContext)(u),O=Object(s.g)(),x=M({email:{value:"",isValid:!0},name:{value:"",isValid:!0}},!0),I=Object(m.a)(x,3),y=I[0],C=I[1],N=I[2],T=function(){var e=Object(E.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,n("".concat("https://newsappprod.herokuapp.com/api","/users/").concat(h),"PATCH",JSON.stringify({email:y.inputs.email.value,name:y.inputs.name.value}),{"Content-Type":"application/json",Authorization:"Bearer "+g.token});case 4:O.push("/users/"+g.userId),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(1);case 9:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){(function(){var e=Object(E.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n("".concat("https://newsappprod.herokuapp.com/api","/users/").concat(g.userId),"GET",null,{Authorization:"Bearer "+g.token});case 3:t=e.sent,b(t.user),N({email:{value:t.user.email,isValid:!0},name:{value:t.user.name,isValid:!0}},!0),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[N,h,n]),t?c.a.createElement("div",{className:"center"},c.a.createElement(w,null)):p||a?c.a.createElement(c.a.Fragment,null,c.a.createElement(k,{error:a,onClear:l}),!t&&p&&c.a.createElement("form",{className:"place-form",onSubmit:T},c.a.createElement(G,{id:"email",element:"input",type:"text",label:"Email",validators:[{type:"REQUIRE"}],onInput:C,initialValue:p.email,initialIsValid:!0,errorText:"Please enter a valid email"}),c.a.createElement(G,{id:"name",element:"textarea",label:"Name",validators:[J(5)],onInput:C,initialValue:p.name,initialIsValid:!0,errorText:"Please enter a valid name."}),c.a.createElement(v,{type:"submit",disabled:!y.isValid},"UPDATE USER"))):c.a.createElement("div",{className:"center"},c.a.createElement(f,null,c.a.createElement("h2",null,"Couldn't fetch user")))},Z=function(){var e=j(),t=e.isLoading,a=e.error,n=e.sendRequest,l=e.clearError,i=Object(r.useContext)(u),o=M({title:{value:"",isValid:!1},description:{value:"",isValid:!1}},!1),p=Object(m.a)(o,2),f=p[0],b=p[1],h=Object(s.g)(),g=function(){var e=Object(E.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,n("".concat("https://newsappprod.herokuapp.com/api","/admin/post"),"POST",JSON.stringify({title:f.inputs.title.value,description:f.inputs.description.value}),{"Content-Type":"application/json",Authorization:"Bearer "+i.token});case 4:h.push("/"),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(1);case 9:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}();return c.a.createElement(c.a.Fragment,null,c.a.createElement(k,{error:a,onClear:l}),c.a.createElement("form",{className:"place-form",onSubmit:g},t&&c.a.createElement(w,{asOverlay:!0}),c.a.createElement(G,{id:"title",element:"input",type:"text",label:"Title",validators:[{type:"REQUIRE"}],onInput:b,errorText:"Please enter a valid title"}),c.a.createElement(G,{id:"description",element:"textarea",label:"Description",validators:[J(5)],onInput:b,errorText:"Please enter a valid description."}),c.a.createElement(v,{type:"submit",disabled:!f.isValid},"ADD POST")))},K=function(){var e=j(),t=e.isLoading,a=e.error,n=e.sendRequest,l=e.clearError,i=Object(r.useState)(),o=Object(m.a)(i,2),p=o[0],b=o[1],h=Object(s.h)().postId,g=Object(r.useContext)(u),O=Object(s.g)(),x=M({title:{value:"",isValid:!0},description:{value:"",isValid:!0}},!0),I=Object(m.a)(x,3),y=I[0],C=I[1],N=I[2],T=function(){var e=Object(E.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,n("".concat("https://newsappprod.herokuapp.com/api","/admin/post/").concat(h),"PATCH",JSON.stringify({title:y.inputs.title.value,description:y.inputs.description.value}),{"Content-Type":"application/json",Authorization:"Bearer "+g.token});case 4:O.push("/"),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(1);case 9:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){(function(){var e=Object(E.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n("".concat("https://newsappprod.herokuapp.com/api","/admin/post"));case 3:t=e.sent,b(t.posts[0]),N({title:{value:t.posts[0].title,isValid:!0},description:{value:t.posts[0].description,isValid:!0}},!0),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[N,h,n]),t?c.a.createElement("div",{className:"center"},c.a.createElement(w,null)):p||a?c.a.createElement(c.a.Fragment,null,c.a.createElement(k,{error:a,onClear:l}),!t&&p&&c.a.createElement("form",{className:"place-form",onSubmit:T},c.a.createElement(G,{id:"title",element:"input",type:"text",label:"Title",validators:[{type:"REQUIRE"}],onInput:C,initialValue:p.title,initialIsValid:!0,errorText:"Please enter a valid title"}),c.a.createElement(G,{id:"description",element:"textarea",label:"Description",validators:[J(5)],onInput:C,initialValue:p.description,initialIsValid:!0,errorText:"Please enter a valid description."}),c.a.createElement(v,{type:"submit",disabled:!y.isValid},"UPDATE POST"))):c.a.createElement("div",{className:"center"},c.a.createElement(f,null,c.a.createElement("h2",null,"Couldn't fetch post")))},W=(a(53),function(e){var t=Object(r.useContext)(u),a=Object(r.useState)(!0),n=Object(m.a)(a,2),l=n[0],i=n[1],s=j(),o=s.isLoading,p=s.error,b=s.sendRequest,h=s.clearError,g=M({email:{value:"",isValid:!1},password:{value:"",isValid:!1}},!1),O=Object(m.a)(g,3),x=O[0],I=O[1],y=O[2],C=function(){var e=Object(E.a)(d.a.mark((function e(a){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),!l){e.next=13;break}return e.prev=2,e.next=5,b("".concat("https://newsappprod.herokuapp.com/api","/users/login"),"POST",JSON.stringify({email:x.inputs.email.value,password:x.inputs.password.value}),{"Content-Type":"application/json"});case 5:n=e.sent,t.login(n.userId,n.token,n.isAdmin),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(2);case 11:e.next=22;break;case 13:return e.prev=13,e.next=16,b("".concat("https://newsappprod.herokuapp.com/api","/users/signup"),"POST",JSON.stringify({name:x.inputs.name.value,email:x.inputs.email.value,password:x.inputs.password.value}),{"Content-Type":"application/json"});case 16:r=e.sent,t.login(r.userId,r.token,r.isAdmin),e.next=22;break;case 20:e.prev=20,e.t1=e.catch(13);case 22:case"end":return e.stop()}}),e,null,[[2,9],[13,20]])})));return function(t){return e.apply(this,arguments)}}();return c.a.createElement(c.a.Fragment,null,c.a.createElement(k,{error:p,onClear:h}),c.a.createElement(f,{className:"authentication"},o&&c.a.createElement(w,{asOverlay:!0}),c.a.createElement("h2",null," ",l?"LOGIN":"SIGN-UP"),c.a.createElement("hr",null),c.a.createElement("form",{onSubmit:C},!l&&c.a.createElement(G,{id:"name",element:"input",type:"text",label:"Full Name",validators:[{type:"REQUIRE"}],onInput:I,errorText:"Please enter full name."}),c.a.createElement(G,{id:"email",element:"input",type:"email",label:"Email",validators:[{type:"EMAIL"}],onInput:I,errorText:"Please enter a valid email."}),c.a.createElement(G,{id:"password",element:"input",type:"password",label:"Password",validators:[J(6)],onInput:I,errorText:"Please enter a valid password, at least 6 characters."}),c.a.createElement(v,{type:"submit",disabled:!x.isValid},l?"LOGIN":"SIGN-UP")),c.a.createElement(v,{inverse:!0,onClick:function(e){l?y(Object(R.a)(Object(R.a)({},x.inputs),{},{name:{value:"",isValid:!1}}),!1):y(Object(R.a)(Object(R.a)({},x.inputs),{},{name:void 0}),x.inputs.email.isValid&&x.inputs.password.isValid),i((function(e){return!e}))}},l?"SWITCH TO SIGN-UP":"SWITCH TO LOGIN")))}),Y=(a(54),function(e){return c.a.createElement("header",{className:"main-header"},e.children)}),_=(a(55),function(e){var t=Object(r.useContext)(u);return c.a.createElement("ul",{className:"nav-links"},c.a.createElement("li",null,c.a.createElement(o.c,{to:"/review",exact:!0},"CONTACT US")),c.a.createElement("li",null,c.a.createElement(o.c,{to:"/",exact:!0},"ALL POSTS")),t.isLoggedIn&&t.isAdmin&&c.a.createElement("li",null,c.a.createElement(o.c,{to:"/users"},"All USERS")),t.isLoggedIn&&c.a.createElement("li",null,c.a.createElement(o.c,{to:"/stats"},"METRICS")),t.isLoggedIn&&c.a.createElement("li",null,c.a.createElement(o.c,{to:"/users/".concat(t.userId)},"MY PROFILE")),t.isLoggedIn&&c.a.createElement("li",null,c.a.createElement(o.c,{to:"/".concat(t.userId,"/posts")},"MY POSTS")),t.isLoggedIn&&!t.isAdmin&&c.a.createElement("li",null,c.a.createElement(o.c,{to:"/posts/new"},"ADD POST")),t.isLoggedIn&&t.isAdmin&&c.a.createElement("li",null,c.a.createElement(o.c,{to:"/posts/new"},"ADMIN POST")),t.isLoggedIn&&c.a.createElement("li",null,c.a.createElement("button",{onClick:t.logout},"LOGOUT")),!t.isLoggedIn&&c.a.createElement("li",null,c.a.createElement(o.c,{to:"/auth"},"LOGIN")))}),$=(a(56),function(e){var t=c.a.createElement(b.a,{in:e.show,timeout:200,classNames:"slide-in-left",mountOnEnter:!0,unmountOnExit:!0},c.a.createElement("aside",{className:"side-drawer",onClick:e.onClick},e.children));return l.createPortal(t,document.getElementById("drawer-hook"))}),ee=a(27),te=a.n(ee),ae=(a(57),function(e){var t=Object(r.useState)(!1),a=Object(m.a)(t,2),n=a[0],l=a[1],i=function(){l(!1)};return c.a.createElement(c.a.Fragment,null,n&&c.a.createElement(h,{onClick:i}),c.a.createElement($,{show:n,onClick:i},c.a.createElement("nav",{className:"main-navigation-drawer-nav"},c.a.createElement(_,null))),c.a.createElement(Y,null,c.a.createElement("button",{className:"main-navigation-menu-btn",onClick:function(){l(!0)}},c.a.createElement("span",null),c.a.createElement("span",null),c.a.createElement("span",null)),c.a.createElement("h1",{className:"main-navigation-title"},c.a.createElement(o.b,{to:"/"},c.a.createElement("img",{src:te.a,alt:"home"}))),c.a.createElement("nav",{className:"main-navigation-header-nav"},c.a.createElement(_,null))))}),ne=(a(58),function(e){return 0===e.items.length?c.a.createElement("div",{className:"center"},c.a.createElement(f,null,c.a.createElement("h2",null,"No users found."))):c.a.createElement("ul",{className:"users-list"},e.items.map((function(e){return c.a.createElement(L,{key:e.id,id:e.id,image:e.image,name:e.name,email:e.email,postCount:e.posts.length})})))}),re=function(){var e=Object(r.useContext)(u),t=Object(r.useState)([]),a=Object(m.a)(t,2),n=a[0],l=a[1],i=Object(r.useState)(""),s=Object(m.a)(i,2),o=s[0],p=(s[1],j()),f=p.isLoading,v=p.error,b=p.sendRequest,h=p.clearError;Object(r.useEffect)((function(){(function(){var t=Object(E.a)(d.a.mark((function t(){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b("".concat("https://newsappprod.herokuapp.com/api","/users"),"GET",null,{Authorization:"Bearer "+e.token});case 3:a=t.sent,l(a.users.filter((function(t){return t.id!==e.userId}))),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}})()()}),[b]);return c.a.createElement(c.a.Fragment,null,c.a.createElement(k,{error:v,onClear:h}),f&&c.a.createElement("div",{className:"center"},c.a.createElement(w,null)),!f&&n&&c.a.createElement(ne,{items:n.filter((function(e){return o?e.name.includes(o):e}))}))},ce=function(){var e=j(),t=e.isLoading,a=e.error,n=(e.sendRequest,e.clearError),r=Object(s.g)(),l=M({name:{value:"",isValid:!0},description:{value:"",isValid:!0}},!0),i=Object(m.a)(l,3),o=i[0],u=i[1],p=(i[2],function(){var e=Object(E.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault();try{window.open("mailto:test@example.com?subject=subject&body=".concat(" Name: "+o.inputs.name.value+" Topic: "+o.inputs.description.value)),r.push("/")}catch(a){}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return t?c.a.createElement("div",{className:"center"},c.a.createElement(w,null)):c.a.createElement(c.a.Fragment,null,c.a.createElement(k,{error:a,onClear:n}),!t&&c.a.createElement("form",{className:"place-form",onSubmit:p},c.a.createElement(G,{id:"name",element:"input",label:"Name",validators:[J(5)],onInput:u,errorText:"Please enter a valid name."}),c.a.createElement(G,{id:"description",element:"textarea",label:"Description",validators:[J(15)],onInput:u,errorText:"Please enter description at least 15 characters."}),c.a.createElement(v,{type:"submit",disabled:!o.isValid},"SEND REVIEW")))},le=a(20),ie=a.n(le),se=function(e){var t=Object(r.useContext)(u),a=j(),n=a.isLoading,l=(a.error,a.sendRequest),i=(a.clearError,Object(r.useState)({})),s=Object(m.a)(i,2),o=s[0],p=s[1],v=Object(r.useState)([]),b=Object(m.a)(v,2),h=b[0],g=b[1];return Object(r.useEffect)((function(){(function(){var e=Object(E.a)(d.a.mark((function e(){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l("".concat("https://newsappprod.herokuapp.com/api","/users/stats"),"GET",null,{"Content-Type":"application/json",Authorization:"Bearer "+t.token});case 3:a=e.sent,g(a.userRating),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[l]),Object(r.useEffect)((function(){(function(){var e=Object(E.a)(d.a.mark((function e(){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l("".concat("https://newsappprod.herokuapp.com/api","/posts/stats"),"GET",null,{"Content-Type":"application/json",Authorization:"Bearer "+t.token});case 3:a=e.sent,p(a),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[l]),c.a.createElement(c.a.Fragment,null,n&&c.a.createElement("div",{className:"center"},c.a.createElement(w,null)),!n&&o&&h&&c.a.createElement("div",{className:"stats-page"},c.a.createElement("div",{className:"stats-item"},c.a.createElement(f,null,c.a.createElement("div",null,"Post By Category"),c.a.createElement("ul",{className:"app-news-list"},c.a.createElement("li",{key:o.sport},c.a.createElement("span",null,"Sport:"),c.a.createElement("span",null,o.sport)),c.a.createElement("li",{key:o.politic},c.a.createElement("span",null,"Politic :"),c.a.createElement("span",null,o.politic)),c.a.createElement("li",{key:o.economic},c.a.createElement("span",null,"Economic:"),c.a.createElement("span",null,o.economic)),c.a.createElement("li",{key:o.culture},c.a.createElement("span",null,"Culture:"),c.a.createElement("span",null,o.culture))))),c.a.createElement("div",{className:"stats-item"},c.a.createElement(f,null,c.a.createElement("div",null,"Users Posts"),c.a.createElement("ul",{className:"app-news-list"},h.map((function(e){return c.a.createElement("li",{key:e},c.a.createElement("span",null,e.name),c.a.createElement("span",null,e.posts," Posts"))})))))))},oe=function(){var e,t=function(){var e=Object(r.useState)(null),t=Object(m.a)(e,2),a=t[0],c=t[1],l=Object(r.useState)(null),i=Object(m.a)(l,2),s=i[0],o=i[1],u=Object(r.useState)(null),p=Object(m.a)(u,2),d=p[0],E=p[1],f=Object(r.useState)(!1),v=Object(m.a)(f,2),b=v[0],h=v[1],g=Object(r.useCallback)((function(){c(null),o(null),E(null),h(!1),localStorage.removeItem("userData")}),[]),O=Object(r.useCallback)((function(e,t,a,n){c(t),E(e),h(a);var r=n||new Date((new Date).getTime()+36e5);o(r),localStorage.setItem("userData",JSON.stringify({userId:e,token:t,isAdmin:a,expiration:r.toISOString()}))}),[]);return Object(r.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userData"));e&&e.token&&new Date(e.expiration)>new Date&&O(e.userId,e.token,e.isAdmin,new Date(e.expiration))}),[O]),Object(r.useEffect)((function(){if(a&&s){var e=s.getTime()-(new Date).getTime();n=setTimeout(g,e)}else clearTimeout(n)}),[a,g,s]),{token:a,login:O,logout:g,userId:d,isAdmin:b}}(),a=t.token,l=t.login,i=t.logout,p=t.userId,d=t.isAdmin;e=a&&!d?c.a.createElement(s.d,null,c.a.createElement(s.b,{path:"/",exact:!0},c.a.createElement(V,null)),c.a.createElement(s.b,{path:"/users/:userId"},c.a.createElement(P,null)),c.a.createElement(s.b,{path:"/:userId/posts"},c.a.createElement(D,null)),c.a.createElement(s.b,{path:"/posts/new",exact:!0},c.a.createElement(H,null)),c.a.createElement(s.b,{path:"/posts/:postId",exact:!0},c.a.createElement(Q,null)),c.a.createElement(s.b,{path:"/update/:userId"},c.a.createElement(X,null)),c.a.createElement(s.b,{path:"/review",exact:!0},c.a.createElement(ce,null)),c.a.createElement(s.b,{path:"/stats",exact:!0},c.a.createElement(se,null)),c.a.createElement(s.a,{to:"/"})):a&&d?c.a.createElement(s.d,null,c.a.createElement(s.b,{path:"/",exact:!0},c.a.createElement(V,null)),c.a.createElement(s.b,{path:"/users",exact:!0},c.a.createElement(re,null)),c.a.createElement(s.b,{path:"/users/:userId"},c.a.createElement(P,null)),c.a.createElement(s.b,{path:"/:userId/posts"},c.a.createElement(D,null)),c.a.createElement(s.b,{path:"/posts/new",exact:!0},c.a.createElement(Z,null)),c.a.createElement(s.b,{path:"/posts/:postId",exact:!0},c.a.createElement(K,null)),c.a.createElement(s.b,{path:"/review",exact:!0},c.a.createElement(ce,null)),c.a.createElement(s.b,{path:"/stats",exact:!0},c.a.createElement(se,null)),c.a.createElement(s.a,{to:"/"})):c.a.createElement(s.d,null,c.a.createElement(s.b,{path:"/",exact:!0},c.a.createElement(V,null)),c.a.createElement(s.b,{path:"/:userId/posts"},c.a.createElement(D,null)),c.a.createElement(s.b,{path:"/auth",exact:!0},c.a.createElement(W,null)),c.a.createElement(s.b,{path:"/review",exact:!0},c.a.createElement(ce,null)),c.a.createElement(s.a,{to:"/auth"}));var E=Object(le.useOpenWeather)({key:"2cfd91ccaa7cba171f67648224f8fd26",lat:"31.0461",lon:"34.8516",lang:"en",unit:"metric"}),f=E.data,v=E.isLoading,b=E.errorMessage;return c.a.createElement(u.Provider,{value:{isLoggedIn:!!a,token:a,userId:p,isAdmin:d,login:l,logout:i}},c.a.createElement(o.a,null,c.a.createElement(ae,null),c.a.createElement("main",null,e),c.a.createElement("footer",{className:"weather"},c.a.createElement(ie.a,{isLoading:v,errorMessage:b,data:f,lang:"en",locationLabel:"Israel",unitsLabels:{temperature:"C",windSpeed:"Km/h"},showForecast:!0}))))};i.a.render(c.a.createElement(oe,null),document.getElementById("root"))}],[[30,1,2]]]);
//# sourceMappingURL=main.ef7fcd50.chunk.js.map